<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>My Rides - RideWise</title>
    <link rel="stylesheet" href="../static/rider_history.css">
</head>

<body>

    <div class="container">

        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="logo-section">
                <img src="../static/images/logo.png" class="logo">
                <h2>RideWise</h2>
            </div>

            <nav>
                <a href="{{ url_for('rider_dashboard') }}">Dashboard</a>
                <a href="{{ url_for('book_ride') }}">Book Ride</a>
                <a href="{{ url_for('rider_history') }}" class="active">My Rides</a>
                <a href="{{ url_for('logout') }}">Logout</a>
            </nav>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content">

            <h1 class="page-title">My Rides üåø</h1>
            <p class="subtitle">View and manage your ride history.</p>

            <div class="rides-container">

                {% if rides and rides|length > 0 %}

                {% for ride in rides %}

                <div class="ride-card">
                    <div class="ride-row">
                        <div class="ride-info">
                            <span class="location">
                                {{ ride.start_location }} ‚Üí {{ ride.end_location }}
                            </span>
                            <span class="date-time">
                                {{ ride.get('date', '') }}  {{ ride.get('time', '') }}
                            </span>
                        </div>

                        <div class="ride-actions">
                            <span class="status {{ ride.status }}">
                                {{ ride.status | capitalize }}
                            </span>
                            <button class="eco-btn" onclick="toggleEco(this)">üåø</button>
                        </div>
                    </div>

                    <div class="eco-dropdown">
                        <p><strong>Driver:</strong> {{ ride.driver_name }}</p>
                        <p><strong>Phone:</strong> {{ ride.driver_phone }}</p>
                        <p><strong>Vehicle:</strong> {{ ride.vehicle_number }}</p>

                        <div>üìè Distance: <b>{{ ride.distance_km }} km</b></div>
                        <div>üí∞ Fare: <b>‚Çπ{{ ride.fare }}</b></div>
                        <div>üåç Total CO‚ÇÇ Saved: <b>{{ ride.co2_saved }} kg</b></div>
                        <div>‚õΩ Fuel Saved: <b>{{ ride.fuel_saved }} Liters</b></div>
                        <div>‚≠ê Eco Score: <b>{{ ride.eco_points }}</b></div>
                    </div>
                </div>

                {% endfor %}

                {% else %}

                <div class="ride-card">
                    <div class="ride-row">
                        <div class="ride-info">
                            <span class="location">No rides booked yet</span>
                            <span class="date-time">Book your first eco ride üåø</span>
                        </div>
                    </div>
                </div>

                {% endif %}

            </div>
        </main>
    </div>

    <script>
        function toggleEco(button) {
            const card = button.closest(".ride-card");
            const dropdown = card.querySelector(".eco-dropdown");
            dropdown.classList.toggle("show");
        }
    </script>

</body>

</html>