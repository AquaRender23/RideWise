<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>My Rides - RideWise</title>
    <link rel="stylesheet" href="../static/driver_history.css">
</head>

<body>

    <div class="container">

        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="logo-section">
                <img src="../static/images/logo.png" class="logo">
                <h2>RideWise</h2>
            </div>

            <nav>
                <a href="{{ url_for('driver_dashboard') }}">Dashboard</a>
                <a href="{{ url_for('add_ride') }}">Add Ride</a>
                <a href="{{ url_for('driver_history') }}" class="active">My Rides</a>
                <a href="{{ url_for('logout') }}">Logout</a>
            </nav>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content">

            <h1 class="page-title">My Rides ğŸŒ¿</h1>
            <p class="subtitle">View and manage your ride history.</p>

            <div class="rides-container">
                {% if bookings and bookings|length > 0 %}

                {% for ride in bookings %}
                <div class="ride-card">
                    <div class="ride-row">
                        <div class="ride-info">
                            <span class="location">
                                {{ ride.start_location }} â†’ {{ ride.end_location }}
                            </span>
                            <span class="date-time">
                                {{ ride.date }}  {{ ride.time }}
                            </span>
                            <div class="rider-info">
                                ğŸ‘¤ Rider: <b>{{ ride.rider_name }}</b><br>
                                ğŸ“ Phone: <b>{{ ride.rider_phone }}</b><br>
                                ğŸ‘¥ People: <b>{{ ride.people }}</b>
                            </div>
                        </div>

                        <div class="ride-actions">
                            <span class="status {{ ride.status }}">
                                {{ ride.status|capitalize }}
                            </span>
                            <button class="eco-btn" onclick="toggleEco(this)">ğŸŒ¿</button>
                        </div>
                    </div>

                    <div class="eco-dropdown">
                        <div>ğŸ“ Distance: <b>{{ ride.distance_km }} km</b></div>
                        <div>ğŸ’° Fare: <b>â‚¹{{ ride.fare }}</b></div>
                        <div>ğŸŒ COâ‚‚ Saved: <b>{{ ride.co2_saved }} kg</b></div>
                        <div>â›½ Fuel Saved: <b>{{ ride.fuel_saved }} L</b></div>
                        <div>â­ Eco Points: <b>{{ ride.eco_points }}</b></div>
                    </div>
                </div>
                {% endfor %}

                {% else %}

                <div class="no-rides">
                    <h2>No rides booked yet</h2>
                    <!-- <p>Book your first eco ride ğŸŒ¿</p> -->
                </div>

                {% endif %}

            </div>
    </div>
    </div>
    </main>
    </div>

    <script>
        function toggleEco(button) {
            const card = button.closest(".ride-card");
            const dropdown = card.querySelector(".eco-dropdown");
            dropdown.classList.toggle("show");
        }
    </script>

</body>

</html>